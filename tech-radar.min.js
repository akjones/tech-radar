var tr=tr||{};tr.models={},tr.graphing={},tr.util={},tr.graphing.Radar=function(t,n,r){function e(){return Math.round(t/2)}function a(t){return Math.PI*t/180}function c(n,r){var c=t*(1-(-Math.sin(a(r.startAngle))+1)/2),o=t*(1-(-Math.sin(a(r.startAngle-90))+1)/2),u=t*(1-(Math.cos(a(r.startAngle))+1)/2),i=t*(1-(Math.cos(a(r.startAngle-90))+1)/2);n.append("line").attr("x1",e()).attr("y1",u).attr("x2",e()).attr("y2",i).attr("stroke-width",14),n.append("line").attr("x1",c).attr("y1",e()).attr("x2",o).attr("y2",e()).attr("stroke-width",14)}function o(t,n){var r=v.sum(t.length),a=v.sum(n);return e()-e()*a/r}function u(t,n){var r=y.append("g").attr("class","quadrant-group quadrant-group-"+n.order);return t.forEach(function(c,u){var i=d3.svg.arc().innerRadius(u==t.length-1?0:o(t,u+1)).outerRadius(o(t,u)).startAngle(a(n.startAngle)).endAngle(a(n.startAngle-90));r.append("path").attr("d",i).attr("class","cycle-arc-"+c.order()).attr("transform","translate("+e()+", "+e()+")")}),r}function i(t,n,r){var a;a=Math.round(e()/n.length),n.forEach(function(a,c){"first"===r.order||"fourth"===r.order?t.append("text").attr("class","line-text").attr("y",e()+4).attr("x",e()+o(n,c)-10).attr("text-anchor","end").text(a.name()):t.append("text").attr("class","line-text").attr("y",e()+4).attr("x",e()-o(n,c)+10).text(a.name())})}function s(t,n,r,e){var a,c,o,u,i,s;return a=13,c=n-a,o=t-a+1,u=t+a+1,i=n+a-a/2.5,s=t+1+","+c+" "+o+","+i+" "+u+","+i,(e||y).append("polygon").attr("points",s).attr("class",r).attr("stroke-width",1.5)}function l(t,n,r,e){var a=22;return(e||y).append("path").attr("d","M420.084,282.092c-1.073,0-2.16,0.103-3.243,0.313c-6.912,1.345-13.188,8.587-11.423,16.874c1.732,8.141,8.632,13.711,17.806,13.711c0.025,0,0.052,0,0.074-0.003c0.551-0.025,1.395-0.011,2.225-0.109c4.404-0.534,8.148-2.218,10.069-6.487c1.747-3.886,2.114-7.993,0.913-12.118C434.379,286.944,427.494,282.092,420.084,282.092").attr("transform","scale("+a/34+") translate("+(-404+t*(34/a)-17)+", "+(-282+n*(34/a)-17)+")").attr("class",r)}function d(t,n){var r=d3.select("#"+n+"-quadrant .cycle-table");return r.append("h3").text(t),r.append("ul")}function p(t,n,r,c,o){var u=Math.sin(a(o))-Math.cos(a(o)),i=-Math.cos(a(o))-Math.sin(a(o)),s=a(t.integer({min:13,max:85})),l=t.floating({min:r+10,max:c-10}),d=e()+l*Math.cos(s)*u,p=e()+l*Math.sin(s)*i;return[d,p]}function f(t,n){var r=22;return n.some(function(n){return Math.abs(n[0]-t[0])<r&&Math.abs(n[1]-t[1])<r})}function h(t,n,r){var e,a,c,u;a=r.quadrant,c=r.startAngle,u=r.order,e=a.blips(),n.forEach(function(r,i){var h,m,g;h=o(n,i),m=i==n.length-1?0:o(n,i+1);var g=e.filter(function(t){return t.cycle()==r}),v=r.name().split("").reduce(function(t,n){return t+n.charCodeAt(0)},0),y=a.name().split("").reduce(function(t,n){return t+n.charCodeAt(0)},0),b=new Chance(Math.PI*v*r.name().length*y*a.name().length),x=d(r.name(),a.name()),A=[];g.forEach(function(n){for(var r=p(b,n,m,h,c);f(r,A);)r=p(b,n,m,h,c);A.push(r);var e=r[0],a=r[1],o=t.append("g").attr("class","blip-link");n.isNew()?s(e,a,u,o):l(e,a,u,o),o.append("text").attr("x",e).attr("y",a+4).attr("class","blip-text").attr("text-anchor","middle").text(n.number());var i=x.append("li");i.append("div").attr("class","blip-list-item").text(n.number()+". "+n.name()+". - "+n.topic());var d=i.append("div").attr("class","blip-item-description").text(n.description()),g=function(){d3.selectAll("g.blip-link").attr("opacity",.3),o.attr("opacity",1),i.selectAll(".blip-list-item").classed("highlight",!0),q.show(n.name(),o.node())},v=function(){d3.selectAll("g.blip-link").attr("opacity",1),i.selectAll(".blip-list-item").classed("highlight",!1),q.hide().style({left:0,top:0})};i.on("mouseover",g).on("mouseout",v),o.on("mouseover",g).on("mouseout",v);var y=function(){d.classed("expanded",!d.classed("expanded"))};i.on("click",y)})})}function m(n){function r(n,r,c,o){var u=Math.sin(a(o))-Math.cos(a(o)),i=-Math.cos(a(o))-Math.sin(a(o)),s=e.append("div").attr({id:n+"-quadrant","class":"quadrant-table "+r});s.append("h1").attr("class","quadrant-name").text(n).on("click",function(){if(s.classed("selected"))d3.selectAll(".quadrant-table").classed("selected",!1).style("opacity",1),d3.selectAll(".quadrant-group:not(.quadrant-group-"+r+")").transition().duration(1e3).style("display",""),d3.select(".quadrant-group-"+r).transition().duration(1e3).attr("transform","scale(1)");else{d3.selectAll(".quadrant-group:not(.quadrant-group-"+r+")").style("display","none"),d3.select(".quadrant-group.quadrant-group-"+r).style("display",""),d3.selectAll(".quadrant-table").classed("selected",!1).style("opacity",.3),s.classed("selected",!0).style("opacity",1);var n=-u*t/2-t/4,e=-i*t/2.5-t/4;d3.select(".quadrant-group-"+r).transition().duration(1e3).attr("transform","translate("+n+","+e+")scale(1.5)"),d3.selectAll(".quadrant-group:not(.quadrant-group-"+r+")").attr("transform","scale(1)")}}),s.append("div").attr("class","cycle-table")}var e=b.append("div");r(n[0].quadrant.name(),n[0].order,"right: "+(window.innerWidth/2-138)+"px",n[0].startAngle),r(n[1].quadrant.name(),n[1].order,"left: "+(window.innerWidth/2-138)+"px",n[1].startAngle),r(n[2].quadrant.name(),n[2].order,"left: "+(window.innerWidth/2-138)+"px",n[2].startAngle),r(n[3].quadrant.name(),n[3].order,"right: "+(window.innerWidth/2-138)+"px",n[3].startAngle)}var g,v,y,b,q=d3.tip().attr("class","d3-tip").html(function(t){return t});return v=new tr.util.Fib,g={},g.svg=function(){return y},g.init=function(t){return b=d3.select(t||"body"),g},g.plot=function(){var r,e;r=n.cycles().reverse(),e=n.quadrants(),m(e),y=b.append("svg").call(q),y.attr("width",t).attr("height",t),_.each(e,function(t){var n=u(r,t);c(n,t),i(n,r,t),h(n,r,t)})},g},tr.graphing.RefTable=function(t){function n(){var n={};t.cycles().map(function(t){return{order:t.order(),name:t.name()}}).sort(function(t,n){return t.order===n.order?0:t.order<n.order?-1:1}).forEach(function(t){n[t.name]=[]});var r=[],e=t.quadrants();return Object.keys(e).forEach(function(t){r=r.concat(e[t].blips())}),r.forEach(function(t){n[t.cycle().name()].push(t)}),n}var r,e={};return e.init=function(t){return r=document.querySelector(t||"body"),e},e.render=function(){var t=n(),e='<table class="radar-ref-table">';Object.keys(t).forEach(function(n){e+='<tr class="radar-ref-status-group"><td colspan="3">'+n+"</td></tr>",t[n].forEach(function(t){e+="<tr><td>"+t.number()+"</td><td>"+t.name()+"</td><td>"+t.description()+"</td></tr>"})}),e+="</table>",r.innerHTML=e},e},tr.models.Blip=function(t,n,r,e,a){var c,o;return c={},o=-1,c.name=function(){return t},c.topic=function(){return e||""},c.description=function(){return a||""},c.isNew=function(){return r},c.cycle=function(){return n},c.number=function(){return o},c.setNumber=function(t){o=t},c},tr.models.Cycle=function(t,n){var r={};return r.name=function(){return t},r.order=function(){return n},r},tr.models.Quadrant=function(t){var n,r;return n={},r=[],n.name=function(){return t},n.add=function(t){Array.isArray(t)?r=r.concat(t):r.push(t)},n.blips=function(){return r.slice(0)},n},tr.models.Radar=function(){function t(t){t.forEach(function(t){t.setNumber(++c)})}function n(){return _.pluck(a,"quadrant")}function r(){return n().reduce(function(t,n){return t.concat(n.blips())},[])}var e,a,c,o;return c=0,o=0,a=[{order:"first",startAngle:90},{order:"second",startAngle:0},{order:"third",startAngle:-90},{order:"fourth",startAngle:-180}],e={},e.addQuadrant=function(n){a[o].quadrant=n,t(n.blips()),o++},e.cycles=function(){return _.sortBy(_.map(_.uniq(r(),function(t){return t.cycle().name()}),function(t){return t.cycle()}),function(t){return t.order()})},e.quadrants=function(){return a},e},tr.util.Fib=function(){var t={};return t.sequence=function(t){for(var n=[0,1],r=2;t>r;r++)n[r]=n[r-2]+n[r-1];return n},t.sum=function(n){return 0===n?0:1===n?1:t.sequence(n+1).reduce(function(t,n){return t+n},0)},t};
//# sourceMappingURL=./tech-radar.min.js.map