var tr=tr||{};tr.models={},tr.graphing={},tr.util={},tr.graphing.Radar=function(t,n,r){function e(){return Math.round(t/2)}function a(){v.append("line").attr("x1",e()).attr("y1",0).attr("x2",e()).attr("y2",t).attr("stroke-width",14),v.append("line").attr("x1",0).attr("y1",e()).attr("x2",t).attr("y2",e()).attr("stroke-width",14)}function c(t,n){var r=y.sum(t.length),a=y.sum(n);return e()-e()*a/r}function u(t){t.forEach(function(n,r){v.append("circle").attr("cx",e()).attr("cy",e()).attr("r",c(t,r))})}function i(t){var n;n=Math.round(e()/t.length),t.forEach(function(n,r){v.append("text").attr("class","line-text").attr("y",e()+4).attr("x",e()-c(t,r)+10).text(n.name()),v.append("text").attr("class","line-text").attr("y",e()+4).attr("x",e()+c(t,r)-10).attr("text-anchor","end").text(n.name())})}function o(t,n,r,e){var a,c,u,i,o,s;return a=13,c=n-a,u=t-a+1,i=t+a+1,o=n+a-a/2.5,s=t+1+","+c+" "+u+","+o+" "+i+","+o,(e||v).append("polygon").attr("points",s).attr("class",r).attr("stroke-width",1.5)}function s(t,n,r,e){var a=22;return(e||v).append("path").attr("d","M420.084,282.092c-1.073,0-2.16,0.103-3.243,0.313c-6.912,1.345-13.188,8.587-11.423,16.874c1.732,8.141,8.632,13.711,17.806,13.711c0.025,0,0.052,0,0.074-0.003c0.551-0.025,1.395-0.011,2.225-0.109c4.404-0.534,8.148-2.218,10.069-6.487c1.747-3.886,2.114-7.993,0.913-12.118C434.379,286.944,427.494,282.092,420.084,282.092").attr("transform","scale("+a/34+") translate("+(-404+t*(34/a)-17)+", "+(-282+n*(34/a)-17)+")").attr("class",r)}function d(t,n){var r=d3.select("#"+n+"-quadrant").append("div").attr("class","cycle-table");return r.append("h3").text(t),r.append("ul")}function l(t,n,r,a,c,u){var i=Math.PI*t.integer({min:13,max:85})/180,o=t.floating({min:r+25,max:a-10}),s=e()+o*Math.cos(i)*c,d=e()+o*Math.sin(i)*u;return[s,d]}function f(t,n){var r=22;return n.some(function(n){return Math.abs(n[0]-t[0])<r&&Math.abs(n[1]-t[1])<r})}function p(t,n,r,e,a){var u;u=n.blips(),t.forEach(function(i,p){var h,m,y;h=c(t,p),m=p==t.length-1?0:c(t,p+1);var y=u.filter(function(t){return t.cycle()==i}),b=i.name().split("").reduce(function(t,n){return t+n.charCodeAt(0)},0),g=n.name().split("").reduce(function(t,n){return t+n.charCodeAt(0)},0),I=new Chance(Math.PI*b*i.name().length*g*n.name().length),q=d(i.name(),n.name()),E=[];y.forEach(function(t){for(var n=l(I,t,m,h,r,e);f(n,E);)n=l(I,t,m,h,r,e);E.push(n);var c=n[0],u=n[1],i=v.append("g").attr("class","blip-link");t.isNew()?o(c,u,a,i):s(c,u,a,i),i.append("text").attr("x",c).attr("y",u+4).attr("class","blip-text").attr("text-anchor","middle").text(t.number());var d=q.append("li");d.append("div").attr("class","blip-list-item").text(t.number()+". "+t.name()+". - "+t.topic());var p=d.append("div").attr("class","blip-item-description").text(t.description()),y=function(){d3.selectAll("path").attr("opacity",.3),i.selectAll("path").attr("opacity",1),d.selectAll(".blip-list-item").classed("highlight",!0),x.show(t.name(),i.node())},b=function(){d3.selectAll("path").attr("opacity",1),d.selectAll(".blip-list-item").classed("highlight",!1),x.hide().style({left:0,top:0})};d.on("mouseover",y).on("mouseout",b),i.on("mouseover",y).on("mouseout",b);var g=function(){p.classed("expanded",!p.classed("expanded"))};i.on("click",function(){i.append("span").style("color","green").text("&#x2702;")}),d.on("click",g)})})}function h(t){function n(t,n){d3.select("#radar").append("div").attr({id:t+"-quadrant","class":"quadrant-table "+n}).append("h1").attr("class","quadrant-name").text(t)}_.each(t,function(t){n(t.quadrant.name(),t.order)})}var m,y,v,b,x=d3.tip().attr("class","d3-tip").html(function(t){return t});return b=[],y=new tr.util.Fib,m={},m.svg=function(){return v},m.init=function(t){return v=d3.select(t||"body").append("svg").call(x),m},m.plot=function(){var r,e;r=n.cycles().reverse(),e=n.quadrants(),v.attr("width",t).attr("height",t),u(r),a(),i(r),n.hasQuadrants()&&(h(e),_.each(e,function(t){p(r,t.quadrant,t.x,t.y,t.order)}))},m},tr.graphing.RefTable=function(t){function n(){var n={};t.cycles().map(function(t){return{order:t.order(),name:t.name()}}).sort(function(t,n){return t.order===n.order?0:t.order<n.order?-1:1}).forEach(function(t){n[t.name]=[]});var r=[],e=t.quadrants();return Object.keys(e).forEach(function(t){r=r.concat(e[t].blips())}),r.forEach(function(t){n[t.cycle().name()].push(t)}),n}var r,e={};return e.init=function(t){return r=document.querySelector(t||"body"),e},e.render=function(){var t=n(),e='<table class="radar-ref-table">';Object.keys(t).forEach(function(n){e+='<tr class="radar-ref-status-group"><td colspan="3">'+n+"</td></tr>",t[n].forEach(function(t){e+="<tr><td>"+t.number()+"</td><td>"+t.name()+"</td><td>"+t.description()+"</td></tr>"})}),e+="</table>",r.innerHTML=e},e},tr.models.Blip=function(t,n,r,e,a){var c,u;return c={},u=-1,c.name=function(){return t},c.topic=function(){return e||""},c.description=function(){return a||""},c.isNew=function(){return r},c.cycle=function(){return n},c.number=function(){return u},c.setNumber=function(t){u=t},c},tr.models.Cycle=function(t,n){var r={};return r.name=function(){return t},r.order=function(){return n},r},tr.models.Quadrant=function(t){var n,r;return n={},r=[],n.name=function(){return t},n.add=function(t){Array.isArray(t)?r=r.concat(t):r.push(t)},n.blips=function(){return r.slice(0)},n},tr.models.Radar=function(){function t(t){t.forEach(function(t){t.setNumber(++c)})}function n(){return _.pluck(a,"quadrant")}function r(){return n().reduce(function(t,n){return t.concat(n.blips())},[])}var e,a,c,u;return c=0,u=0,a=[{order:"first",x:1,y:-1},{order:"second",x:-1,y:-1},{order:"third",x:-1,y:1},{order:"fourth",x:1,y:1}],e={},e.addQuadrant=function(n){a[u].quadrant=n,t(n.blips()),u++},e.setFirstQuadrant=function(n){a.I=n,t(a.I.blips())},e.setSecondQuadrant=function(n){a.II=n,t(a.II.blips())},e.setThirdQuadrant=function(n){a.III=n,t(a.III.blips())},e.setFourthQuadrant=function(n){a.IV=n,t(a.IV.blips())},e.hasQuadrants=function(){return!_.isEmpty(a)},e.cycles=function(){return _.sortBy(_.map(_.uniq(r(),function(t){return t.cycle().name()}),function(t){return t.cycle()}),function(t){return t.order()})},e.quadrants=function(){return a},e},tr.util.Fib=function(){var t={};return t.sequence=function(t){for(var n=[0,1],r=2;t>r;r++)n[r]=n[r-2]+n[r-1];return n},t.sum=function(n){return 0===n?0:1===n?1:t.sequence(n+1).reduce(function(t,n){return t+n},0)},t};
//# sourceMappingURL=./tech-radar.min.js.map