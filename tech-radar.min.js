var tr=tr||{};tr.models={},tr.graphing={},tr.util={},tr.graphing.Radar=function(t,n,r){function e(){return Math.round(t/2)}function a(t){return Math.PI*t/180}function c(n,r){var c=t*(1-(-Math.sin(a(r.startAngle))+1)/2),u=t*(1-(-Math.sin(a(r.startAngle-90))+1)/2),o=t*(1-(Math.cos(a(r.startAngle))+1)/2),i=t*(1-(Math.cos(a(r.startAngle-90))+1)/2);n.append("line").attr("x1",e()).attr("x2",e()).attr("y1",o).attr("y2",i).attr("stroke-width",14),n.append("line").attr("x1",c).attr("y1",e()).attr("x2",u).attr("y2",e()).attr("stroke-width",14)}function u(t,n){var r=v.sum(t.length),a=v.sum(n);return e()-e()*a/r}function o(t,n){var r=b.append("g").attr("class","quadrant-group quadrant-group-"+n.order);return t.forEach(function(c,o){var i=d3.svg.arc().innerRadius(o==t.length-1?0:u(t,o+1)).outerRadius(u(t,o)).startAngle(a(n.startAngle)).endAngle(a(n.startAngle-90));r.append("path").attr("d",i).attr("class","cycle-arc-"+c.order()).attr("transform","translate("+e()+", "+e()+")")}),r}function i(t,n,r){var a;a=Math.round(e()/n.length),n.forEach(function(a,c){"first"===r.order||"fourth"===r.order?t.append("text").attr("class","line-text").attr("y",e()+4).attr("x",e()+u(n,c)-A/2).attr("text-anchor","end").text(a.name()):t.append("text").attr("class","line-text").attr("y",e()+4).attr("x",e()-u(n,c)+A/2).text(a.name())})}function s(t,n,r,e){return e.append("path").attr("d","M412.201,311.406c0.021,0,0.042,0,0.063,0c0.067,0,0.135,0,0.201,0c4.052,0,6.106-0.051,8.168-0.102c2.053-0.051,4.115-0.102,8.176-0.102h0.103c6.976-0.183,10.227-5.306,6.306-11.53c-3.988-6.121-4.97-5.407-8.598-11.224c-1.631-3.008-3.872-4.577-6.179-4.577c-2.276,0-4.613,1.528-6.48,4.699c-3.578,6.077-3.26,6.014-7.306,11.723C402.598,306.067,405.426,311.406,412.201,311.406").attr("transform","scale("+A/34+") translate("+(-404+t*(34/A)-17)+", "+(-282+n*(34/A)-17)+")").attr("class",r)}function l(t,n,r,e){return(e||b).append("path").attr("d","M420.084,282.092c-1.073,0-2.16,0.103-3.243,0.313c-6.912,1.345-13.188,8.587-11.423,16.874c1.732,8.141,8.632,13.711,17.806,13.711c0.025,0,0.052,0,0.074-0.003c0.551-0.025,1.395-0.011,2.225-0.109c4.404-0.534,8.148-2.218,10.069-6.487c1.747-3.886,2.114-7.993,0.913-12.118C434.379,286.944,427.494,282.092,420.084,282.092").attr("transform","scale("+A/34+") translate("+(-404+t*(34/A)-17)+", "+(-282+n*(34/A)-17)+")").attr("class",r)}function d(t,n){var r=d3.select(".quadrant-table."+n);return r.append("h3").text(t),r.append("ul")}function p(t,n,r,c,u){var o=Math.sin(a(u))-Math.cos(a(u)),i=-Math.cos(a(u))-Math.sin(a(u)),s=a(t.integer({min:13,max:85})),l=t.floating({min:r+10,max:c-10}),d=e()+l*Math.cos(s)*o,p=e()+l*Math.sin(s)*i;return[d,p]}function f(t,n){return n.some(function(n){return Math.abs(n[0]-t[0])<A&&Math.abs(n[1]-t[1])<A})}function h(t,n,r){var e,a,c,o;a=r.quadrant,c=r.startAngle,o=r.order,e=a.blips(),n.forEach(function(r,i){var h,m,g;h=u(n,i),m=i==n.length-1?0:u(n,i+1);var g=e.filter(function(t){return t.cycle()==r}),v=r.name().split("").reduce(function(t,n){return t+n.charCodeAt(0)},0),b=a.name().split("").reduce(function(t,n){return t+n.charCodeAt(0)},0),y=new Chance(Math.PI*v*r.name().length*b*a.name().length),A=d(r.name(),o),q=[];g.forEach(function(n){for(var r=p(y,n,m,h,c);f(r,q);)r=p(y,n,m,h,c);q.push(r);var e=r[0],a=r[1],u=t.append("g").attr("class","blip-link");n.isNew()?s(e,a,o,u):l(e,a,o,u),u.append("text").attr("x",e).attr("y",a+4).attr("class","blip-text").attr("text-anchor","middle").text(n.number());var i=A.append("li");i.append("div").attr("class","blip-list-item").text(n.number()+". "+n.name()+". - "+n.topic());var d=i.append("div").attr("class","blip-item-description");n.description()&&d.append("p").text(n.description());var g=function(){d3.selectAll("g.blip-link").attr("opacity",.3),u.attr("opacity",1),i.selectAll(".blip-list-item").classed("highlight",!0),x.show(n.name(),u.node())},v=function(){d3.selectAll("g.blip-link").attr("opacity",1),i.selectAll(".blip-list-item").classed("highlight",!1),x.hide().style({left:0,top:0})};i.on("mouseover",g).on("mouseout",v),u.on("mouseover",g).on("mouseout",v);var b=function(){d.classed("expanded",!d.classed("expanded"))};i.on("click",b)})})}function m(n){function r(n){var r=n.order,c=n.startAngle;y.append("div").attr("class","quadrant-table "+r);var u=e.append("div").attr("class","button "+r).text(n.quadrant.name()).on("mouseover",function(){d3.select(".quadrant-group-"+r).style("opacity",1),d3.selectAll(".quadrant-group:not(.quadrant-group-"+r+")").style("opacity",.3)}).on("mouseout",function(){d3.selectAll(".quadrant-group:not(.quadrant-group-"+r+")").style("opacity",1)}).on("click",function(){d3.selectAll(".button").classed("selected",!1),u.classed("selected",!0),d3.selectAll(".quadrant-table").classed("selected",!1),d3.selectAll(".quadrant-table."+r).classed("selected",!0);var n=Math.sin(a(c))-Math.cos(a(c)),e=Math.cos(a(c))+Math.sin(a(c)),o=(-1-n)*t/2,i=(-1+e)*(t/2-7),s=(1-n)*t/2,l=(1+e)*t/2,d=(1+n)*(window.innerWidth-t)/2,p=(1-n)*(window.innerWidth-t)/2;b.style({left:p,right:d}),d3.select(".quadrant-group-"+r).transition().duration(1e3).attr("transform","translate("+o+","+i+")scale(2)"),d3.selectAll(".quadrant-group:not(.quadrant-group-"+r+")").transition().duration(1e3).attr("transform","translate("+s+","+l+")scale(0)")})}var e=y.append("header");_.each([0,3,2,1],function(t){r(n[t])})}var g,v,b,y,A=22,x=d3.tip().attr("class","d3-tip").html(function(t){return t});return x.direction(function(t){if(d3.select(".quadrant-table.selected").node()){var n=d3.select(".quadrant-table.selected");return n.classed("first")||n.classed("fourth")?"ne":"nw"}return"n"}),v=new tr.util.Fib,g={},g.svg=function(){return b},g.init=function(t){return y=d3.select(t||"body"),g},g.plot=function(){var r,e;r=n.cycles().reverse(),e=n.quadrants(),m(e),b=y.append("svg").call(x),b.attr("width",t).attr("height",t+14),_.each(e,function(t){var n=o(r,t);c(n,t),i(n,r,t),h(n,r,t)})},g},tr.models.Blip=function(t,n,r,e,a){var c,u;return c={},u=-1,c.name=function(){return t},c.topic=function(){return e||""},c.description=function(){return a||""},c.isNew=function(){return r},c.cycle=function(){return n},c.number=function(){return u},c.setNumber=function(t){u=t},c},tr.models.Cycle=function(t,n){var r={};return r.name=function(){return t},r.order=function(){return n},r},tr.models.Quadrant=function(t){var n,r;return n={},r=[],n.name=function(){return t},n.add=function(t){Array.isArray(t)?r=r.concat(t):r.push(t)},n.blips=function(){return r.slice(0)},n},tr.models.Radar=function(){function t(t){t.forEach(function(t){t.setNumber(++c)})}function n(){return _.pluck(a,"quadrant")}function r(){return n().reduce(function(t,n){return t.concat(n.blips())},[])}var e,a,c,u;return c=0,u=0,a=[{order:"first",startAngle:90},{order:"second",startAngle:0},{order:"third",startAngle:-90},{order:"fourth",startAngle:-180}],e={},e.addQuadrant=function(n){a[u].quadrant=n,t(n.blips()),u++},e.cycles=function(){return _.sortBy(_.map(_.uniq(r(),function(t){return t.cycle().name()}),function(t){return t.cycle()}),function(t){return t.order()})},e.quadrants=function(){return a},e},tr.util.Fib=function(){var t={};return t.sequence=function(t){for(var n=[0,1],r=2;t>r;r++)n[r]=n[r-2]+n[r-1];return n},t.sum=function(n){return 0===n?0:1===n?1:t.sequence(n+1).reduce(function(t,n){return t+n},0)},t};
//# sourceMappingURL=./tech-radar.min.js.map